{"version":3,"file":"bundle.js","sources":["../src/migrations/afk.ts","../src/migrations/censor.ts","../src/migrations/combat.ts","../src/migrations/cron.ts","../src/migrations/nameTriggers.ts","../src/migrations/slashOp.ts","../src/migrations/discord.ts","../src/migrations/manpages.ts","../src/migrations/tempban.ts","../src/migrations/warnings.ts","../src/migrations/settings.ts","../src/migrations/housekeeping.ts","../src/migrations/quests.ts","../src/migrations/banking.ts","../src/migrations/messages.ts","../src/migrations/obsolete.ts","../src/migrations/extensions.ts","../src/migrations/groups.ts","../src/migrate.ts","../src/index.ts"],"sourcesContent":["import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/afk\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-AFKResponder/master/build/bundle.js\n */\nexport class AfkConverter implements Converter {\n  id = 'bibliofile/afk'\n\n  supports (key: string) {\n    return key === 'afk_settings'\n  }\n\n  convert (_key: string, data: string): { key: string; data: string } {\n    return { key: 'settings', data }\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/biblio_censor\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-Censor-List/master/build/bundle.js\n */\nexport class CensorConverter implements Converter {\n  id = 'bibliofile/censoring'\n\n  supports (key: string) {\n    return key.startsWith('biblio_censor_')\n  }\n\n  convert (key: string, data: string): { key: string; data: string } {\n    return { key: key.replace('biblio_censor_', ''), data }\n  }\n}\n","import { Converter } from './abstract'\n\ntype UserOld = 'ALL' | 'STAFF' | 'MOD' | 'ADMIN' | 'OWNER'\n\ninterface Old {\n  PVP: {\n    msg: string\n    sel1: UserOld\n    sel2: UserOld\n    num1: string\n    num2: string\n  }[]\n  DEATH: {\n    msg: string\n    sel1: UserOld\n    num1: string\n    num2: string\n  }[]\n}\n\ntype UserNew = 'anyone' | 'mod' | 'admin' | 'owner'\n\ninterface New {\n  pvp: {\n    attacker: UserNew,\n    max: string,\n    min: string,\n    msg: string\n    victim: UserNew\n  }[]\n  death: {\n    max: string,\n    min: string,\n    msg: string\n    victim: UserNew\n  }[]\n}\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/dapersonmgn/DaPVPBeta\n * To: https://gitcdn.xyz/repo/dapersonmgn/BHMB-CombatMessages/master/build/bundle.js\n */\nexport class CombatConverter implements Converter {\n  id = 'dapersonmgn/combatmessages'\n\n  supports (key: string) {\n    return key === 'DaPVPBeta_msgs'\n  }\n\n  convert (key: string, data: string): { key: string; data: string } {\n    const parsed = JSON.parse(data) as Old\n    const newData: New = {\n      pvp: parsed.PVP.map(old => {\n        return {\n          msg: old.msg,\n          victim: this.convertUser(old.sel1),\n          attacker: this.convertUser(old.sel2),\n          min: old.num1,\n          max: old.num2\n        }\n      }),\n      death: parsed.DEATH.map(old => {\n        return {\n          msg: old.msg,\n          victim: this.convertUser(old.sel1),\n          min: old.num1,\n          max: old.num2\n        }\n      })\n    }\n\n    return {\n      key: key.replace('DaPVPBeta_msgs', ''),\n      data: JSON.stringify(newData)\n    }\n  }\n\n  convertUser (old: UserOld): UserNew {\n    const map: { [k in UserOld]: UserNew } = {\n      ALL: 'anyone',\n      STAFF: 'mod', // Not ideal, but close enough\n      MOD: 'mod',\n      ADMIN: 'admin',\n      OWNER: 'owner'\n    }\n\n    return map[old]\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/biblio_cron_messages\n * => ex.messages.push({message: message.value, minutes: minutes.value});\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-Cron-Messages/master/build/bundle.js\n * => messages.push({ message: message.value, minutes: minutes.value });\n */\nexport class CronConverter implements Converter {\n  id = 'bibliofile/cron'\n\n  supports (key: string) {\n    return key === 'biblio_cron_messages_messages'\n  }\n\n  convert (_key: string, data: string): { key: string; data: string } {\n    return { key: 'messages', data }\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/biblio_name_triggers\n * => biblio_name_triggers_preferences - { exactMatch: boolean }\n * => biblio_name_triggers_messages - { message: string, trigger: string }[]\n * Drop the default message as it is generated in MB7\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-NameTriggers/master/build/bundle.js\n * => preferences - { exactMatch: boolean }\n * => messages - { message: string, trigger: string }[]\n */\nexport class NameTriggerConverter implements Converter {\n  id = 'bibliofile/name_triggers'\n\n  supports (key: string) {\n    return key.startsWith('biblio_name_triggers')\n  }\n\n  convert (key: string, data: string): { key: string; data: string } {\n    return { key: key.replace('biblio_name_triggers_', ''), data }\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/biblio_op\n * => biblio_op_messages - { name: string, message: string, timestamp: string }[]\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-Slash-OP/master/build/bundle.js\n * => messages - { name: string, message: string, timestamp: number }[]\n */\nexport class SlashOpConverter implements Converter {\n  id = 'bibliofile/censoring'\n\n  supports (key: string) {\n    return key === 'biblio_op_messages'\n  }\n\n  convert (_key: string, data: string): { key: string; data: string } {\n    const parsed = JSON.parse(data) as { name: string, message: string, timestamp: string }[]\n    return {\n      key: 'messages',\n      data: JSON.stringify(parsed.map(e => {\n        return {\n          ...e,\n          timestamp: +e.timestamp\n        }\n      }))\n    }\n  }\n}\n","import { Converter, MaybeArray } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Wingysam/discord\n * => botToken -string\n * => channelId - string\n * To: ???\n * TODO\n */\nexport class DiscordConverter implements Converter {\n  id = 'xyz.wingysam.discord'\n\n  supports (key: string) {\n    return ['botToken', 'channelId'].includes(key)\n  }\n\n  convert (_key: string, _data: string): MaybeArray<{ key: string; data: string }> {\n    return []\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/manpages\n * => manpages_messages - {default: string, parts: {[k: string]: string}}\n * Drop the default message as it is generated in MB7\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-Manpages/master/build/bundle.js\n * => command - string = '/?'\n * => pages - {[k: string]: string};\n */\nexport class ManpageConverter implements Converter {\n  id = 'bibliofile/manpages'\n\n  supports (key: string) {\n    return key === 'manpages_messages'\n  }\n\n  convert (_key: string, data: string): Array<{ key: string; data: string }> {\n    const parsed = JSON.parse(data) as { default: string, parts: { [k: string]: string } }\n    return [\n      { key: 'pages', data: JSON.stringify(parsed.parts) },\n      { key: 'command', data: '/?' }\n    ]\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/biblio_tempban\n * => biblio_tempban_preferences - { time: number, bans: { [k: string]: string } }\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-TempBan/master/build/bundle.js\n * => config - { time: number, bans: { [k: string]: string } }\n */\nexport class TempbanConverter implements Converter {\n  id = 'bibliofile/tempban'\n\n  supports (key: string) {\n    return key === 'biblio_tempban_preferences'\n  }\n\n  convert (_key: string, data: string): { key: string; data: string } {\n    return { key: 'config', data }\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/warnings\n * => warnings_log - string[]\n * => warnings_warns - { [k: string]: number }\n * => warnings_settings - {\n *       'threshold-ban': 5,\n *       'warn-kick': true,\n *       'response-warn': string\n *       'response-warn-ban': '{{Name}} has been banned after multiple warnings.',\n *       'response-warnlevel': 'Warnings for {{Name}}: {{amount}}',\n *       'response-set-warnings': '{{Name}} set {{Target}}\\'s warnings to {{amount}}.',\n *       'response-unwarn': 'Warning removed from {{Name}}, {{Name}} now has {{left}} warnings.'\n *   }\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-Warnings/master/build/bundle.js\n * => warns - { [k: string]: number }\n * => log - string[]\n * => settings - {\n *       'threshold-ban': number,\n *       'warn-kick': true,\n *       'response-warn': string\n *       'response-warn-ban': '{{Name}} has been banned after multiple warnings.',\n *       'response-warnlevel': 'Warnings for {{Name}}: {{amount}}',\n *       'response-set-warnings': '{{Name}} set {{Target}}\\'s warnings to {{amount}}.',\n *       'response-unwarn': 'Warning removed from {{Name}}, {{Name}} now has {{left}} warnings.'\n *   }\n */\nexport class WarningConverter implements Converter {\n  id = 'bibliofile/tempban'\n\n  supports (key: string) {\n    return key.startsWith('warnings_')\n  }\n\n  convert (key: string, data: string): { key: string; data: string } {\n    return { key: key.replace('warnings_', ''), data }\n  }\n}\n","interface OldPrefs {\n  announcementDelay: number\n  maxResponses: number\n  notify: boolean\n  disableTrim: boolean\n  regexTriggers: boolean\n  splitMessages: boolean\n  splitToken: string\n}\n\n/**\n * Old: https://github.com/Blockheads-Messagebot/MessageBot/blob/efd7a665e3c77338497bbf6a9e13e00a197073d7/dev/settings/bot/index.js#L7\n * New: https://github.com/Blockheads-Messagebot/Browser-Loader/blob/master/src/settings.ts#L9\n */\nexport function settingsConverter ({ overwrite }: { overwrite: boolean }): [string[], string[]] {\n  if (!overwrite) {\n    return [['mb_preferences'], ['Global settings from V6 were not copied to all worlds.']]\n  }\n\n  const worldIds = new Set(Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => /\\d$/.test(key))\n    .map(key => key.replace(/.*?(\\d+)$/, '$1')))\n\n  const prefs = JSON.parse(localStorage.getItem('mb_preferences') || '{}') as OldPrefs\n\n  for (const id of worldIds) {\n    localStorage.setItem(`/${id}/messages/announcementDelay`, prefs.announcementDelay.toString())\n    localStorage.setItem(`/${id}/messages/maxResponses`, prefs.maxResponses.toString())\n\n    localStorage.setItem(`/${id}/messages/regexTriggers`, JSON.stringify(prefs.regexTriggers))\n    localStorage.setItem(`/${id}/messages/disableWhitespaceTrimming`, JSON.stringify(prefs.disableTrim))\n    localStorage.setItem(`/${id}/splitMessages`, JSON.stringify(prefs.splitMessages))\n    localStorage.setItem(`/${id}/splitToken`, JSON.stringify(prefs.splitToken))\n  }\n\n  return [['mb_preferences'], []]\n}\n","/**\n * mb_lastLogLoad -> lastPlayersUpdate\n */\nexport function logLoadConverter ({ overwrite }: { overwrite: boolean }): [string[], string[]] {\n  const logLoads = Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => key.startsWith('mb_lastLogLoad'))\n\n  if (!overwrite) {\n    return [logLoads, ['Last log updates were not copied from V6.']]\n  }\n\n  for (const key of logLoads) {\n    const id = key.replace('mb_lastLogLoad', '')\n    localStorage.setItem(`/${id}/lastPlayersUpdate`, localStorage.getItem(key)!)\n  }\n\n  return [logLoads, []]\n}\n\nexport function playersConverter ({ overwrite }: { overwrite: boolean }): [string[], string[]] {\n  const players = Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => key.startsWith('mb_players'))\n\n  if (!overwrite) {\n    return [players, ['Player lists were not copied from V6.']]\n  }\n\n  for (const key of players) {\n    const id = key.replace('mb_players', '')\n    localStorage.setItem(`/${id}/players`, localStorage.getItem(key)!)\n  }\n\n  return [players, []]\n}\n\n// No longer saved.\nexport function versionConverter (): [string[], string[]] {\n  localStorage.removeItem('mb_version')\n  return [['mb_version'], []]\n}\n","export type QuestListing = { id: number, children: QuestListing[] }\n\n/**\n * Describes how the quests are ordered.\n */\nexport type QuestList = QuestListing[]\n\ntype Quests = { id: number, name: string, code: string, description: string, xp: number, completeMessage: string }[]\n\ntype OldUsers = { [k: string]: { xp: string, questMaster?: boolean, completed: string[] } }\ntype NewUsers = { [k: string]: { xp: number, questmaster: boolean, completed: number[] } }\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/quests\n * => quests_log - { message: string, user: string, timestamp: number }[]\n * => quests_quests - { title: string, description: string, xp: string, code: string }[]\n * => quests_settings - {\n *      addxp: string,\n *      quest_already_completed: string,\n *      quest_complete: string,\n *      level: string,\n *      leveltop: string,\n *      player_does_not_exist: string,\n *      quest_details: string,\n *      quest_not_found: string,\n *      quest_list: string,\n *      quest_list_all_complete: string,\n *      removexp: string\n *   }\n * => quests_users - { [k: string]: { xp: string, questMaster?: boolean, completed: string[] }}\n * => quests_levels - { xp: number, title: string, onLevelUp: string }[]\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-Quests/master/build/bundle.js\n * https://github.com/Bibliofile/BHMB-Quests/blob/master/src/quests-tab.ts\n * => quests - { id: number, name: string, code: string, description: string, xp: number, completeMessage: string }[]\n * => quest_id - number <- start at length of quests\n * => order - QuestList <- https://github.com/Bibliofile/BHMB-Quests/blob/master/src/quest.ts#L33\n * https://github.com/Bibliofile/BHMB-Quests/blob/master/src/log-tab.ts\n * => log - { message: string, timestamp: number, user: string }[]\n * https://github.com/Bibliofile/BHMB-Quests/blob/master/src/users-tab.ts\n * => users - { [k: string]: { xp: number, questmaster: boolean, completed: number[] }}\n * https://github.com/Bibliofile/BHMB-Quests/blob/master/src/levels-tab.ts\n * => levels - { xp: number, title: string, onLevelUp: string }[]\n */\n\nexport function questsConverter ({ overwrite }: { overwrite: boolean }): [string[], string[]] {\n  const questsId = 'bibliofile/quests'\n  const migrated: string[] = []\n  const warnings: string[] = []\n\n  const worldIds = new Set(Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => key.startsWith('quests_'))\n    .map(key => key.replace(/.*?(\\d+)$/, '$1')))\n\n  for (const id of worldIds) {\n    const setOrWarn = (key: string, data: string) => {\n      const saveKey = `/${id}/${questsId}/${key}`\n      migrated.push(`quests_${key}${id}`)\n      if (localStorage.getItem(saveKey) != null && !overwrite) {\n        warnings.push(`Ignoring migration for ${saveKey} as there is already data present`)\n      } else {\n        localStorage.setItem(saveKey, data)\n      }\n    }\n\n    // Log, format is the same\n    setOrWarn('log', localStorage.getItem('quests_log' + id) || '[]')\n    // Levels format is the same.\n    setOrWarn('levels', localStorage.getItem('quests_levels' + id) || '[]')\n    // Settings is removed\n    migrated.push('quests_settings' + id)\n\n    // Users & Quests have changed\n    // Users migration depends on quests migration.\n    // quests -> quests, order\n\n    const oldQuests = JSON.parse(localStorage.getItem('quests_quests' + id) || '[]') as { title: string; description: string; xp: string; code: string }[]\n\n    const order: QuestList = oldQuests.map((_, i) => ({ id: i, children: [] }))\n    const quests: Quests = oldQuests\n      .map((q, i) => ({ name: q.title, description: q.description, id: i, code: q.code, xp: +q.xp, completeMessage: '' }))\n    setOrWarn('order', JSON.stringify(order))\n    setOrWarn('quest_id', JSON.stringify(order.length + 1))\n    setOrWarn('quests', JSON.stringify(quests))\n\n    // Transform the \"completed\" property of users to ids\n    const oldUsers = JSON.parse(localStorage.getItem('quests_users' + id) || '{}') as OldUsers\n    delete oldUsers.QUESTS_INVALID_NAME\n    const newUsers: NewUsers = {}\n\n    for (const [ name, data ] of Object.entries(oldUsers)) {\n      newUsers[name] = {\n        xp: +data.xp,\n        questmaster: !!data.questMaster,\n        completed: data.completed.map(c => quests.findIndex(q => q.code === c)).filter(id => id !== -1)\n      }\n    }\n    setOrWarn('users', JSON.stringify(newUsers))\n  }\n\n  return [migrated, warnings]\n}\n","import { Converter, MaybeArray } from './abstract'\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/Bibliofile/biblio_banks\n * => biblio_banks_accounts - { [k: string]: { balance: number, last_daily_award?: number }}\n * => biblio_banks_limit - number\n * => biblio_banks_bankers - string[]\n * => biblio_banks_currency - string\n * => biblio_banks_perms - {\n *       check: 'All',\n *       add: 'AdminBanker',\n *       silent: 'AdminBanker',\n *       daily: 'AdminBanker',\n *       lastdaily: 'AdminBanker',\n *       online: 'AdminBanker',\n *       remove: 'AdminBanker',\n *       banker: 'Admin'\n *     }\n * => biblio_banks_messages - {\n *       check: '{{Name}} currently has {{amount}} {{currency}}.',\n *       transfer: 'Transferred {{amount}} {{currency}} from {{From}} to {{To}}.',\n *       add: 'Added {{amount}} {{currency}} to {{Name}}.',\n *       online: 'Everyone online has recieved {{amount}} {{currency}}!',\n *       daily_yes: 'Added daily reward of {{currency}} to {{Name}}.',\n *       daily_no: '{{Name}} has already recieved their daily reward.',\n *       last_daily: '{{Name}} last recieved a daily award at {{time}}',\n *       remove: 'Removed {{amount}} {{currency}} from {{Name}}.',\n *       banker_yes: '{{Name}} has been added to the banker list.',\n *       banker_on_list_already: '{{Name}} was already on the banker list.',\n *       banker_no: '{{Name}} has been removed from the banker list.',\n *       banker_not_on_list: '{{Name}} was not on the banker list.',\n *       error_no_account: 'Error: unable to {{command}}, the specified account does not exist.',\n *       error_limit_reached: 'Error: {{Name}} can\\'t have more {{currency}} added to their account.',\n *       error_funds: 'Error: {{Name}} does not have enough {{currency}} to transfer funds.'\n *     }\n * => biblio_banks_migration - number\n * To: https://gitcdn.xyz/repo/Bibliofile/BHMB-NameTriggers/master/build/bundle.js\n * => name - string = Server Coin\n * => accounts - { [k: string]: { balance: number, last_daily_award?: number }}\n * => permissions - {\n *       check: 'All',\n *       add: 'AdminBanker',\n *       silent: 'AdminBanker',\n *       daily: 'AdminBanker',\n *       lastdaily: 'AdminBanker',\n *       online: 'AdminBanker',\n *       remove: 'AdminBanker',\n *       banker: 'Admin',\n *     }\n * => messages - {\n *       check: '{{Name}} currently has {{amount}} {{currency}}.',\n *       transfer: 'Transferred {{amount}} {{currency}} from {{From}} to {{To}}.',\n *       add: 'Added {{amount}} {{currency}} to {{Name}}.',\n *       online: 'Everyone online has received {{amount}} {{currency}}!',\n *       daily_yes: 'Added daily reward of {{currency}} to {{Name}}.',\n *       daily_no: '{{Name}} has already received their daily reward.',\n *       last_daily: '{{Name}} last received a daily award at {{time}}',\n *       remove: 'Removed {{amount}} {{currency}} from {{Name}}.',\n *       banker_yes: '{{Name}} has been added to the banker list.',\n *       banker_on_list_already: '{{Name}} was already on the banker list.',\n *       banker_no: '{{Name}} has been removed from the banker list.',\n *       banker_not_on_list: '{{Name}} was not on the banker list.',\n *       error_no_account: 'Error: unable to {{command}}, the specified account does not exist.',\n *       error_limit_reached: 'Error: {{Name}} can\\'t have more {{currency}} added to their account.',\n *       error_funds: 'Error: {{Name}} does not have enough {{currency}} to transfer funds.',\n *     }\n * => bankers - string[]\n */\nexport class BankingConverter implements Converter {\n  id = 'bibliofile/banking'\n\n  supports (key: string) {\n    return key.startsWith('biblio_banks_')\n  }\n\n  convert (key: string, data: string): MaybeArray<{ key: string; data: string }> {\n    switch (key) {\n      case 'biblio_banks_accounts': // Data has same key and format\n      case 'biblio_banks_bankers':\n      case 'biblio_banks_messages':\n        return { key: key.replace('biblio_banks_', ''), data }\n      case 'biblio_banks_currency':\n        return { key: 'name', data }\n      case 'biblio_banks_perms':\n        return { key: 'permissions', data }\n      default: // Drop migration & limit\n        return []\n    }\n  }\n}\n","import { Converter } from './abstract'\n\n/**\n * From: https://github.com/Blockheads-Messagebot/MessageBot/blob/efd7a66/dev/messages/announcements/index.js#L24\n * => announcementArr - { message: string }[]\n * https://github.com/Blockheads-Messagebot/MessageBot/blob/efd7a66/dev/messages/join/index.js#L50\n * => joinArr - { message: string, joins_low: number, joins_high: number, group: string, not_group: string }[]\n * https://github.com/Blockheads-Messagebot/MessageBot/blob/efd7a66/dev/messages/leave/index.js#L51\n * => leaveArr - { message: string, joins_low: number, joins_high: number, group: string, not_group: string }[]\n * https://github.com/Blockheads-Messagebot/MessageBot/blob/efd7a66/dev/messages/trigger/index.js#L52\n * => triggerArr - { message: string, trigger: string, joins_low: number, joins_high: number, group: string, not_group: string }[]\n * To: https://github.com/Blockheads-Messagebot/Messages-Extension/blob/master/src/index.ts#L9\n * => messages.push({ message: message.value, minutes: minutes.value });\n */\nexport class MessageConverter implements Converter {\n  id = 'messages'\n\n  supports (key: string) {\n    return ['announcementArr', 'joinArr', 'leaveArr', 'triggerArr'].includes(key)\n  }\n\n  convert (key: string, data: string): { key: string; data: string } {\n    return { key, data }\n  }\n}\n","// For keys that are no longer used, even by the v6 bot... but were never cleaned up\n\nexport function obsoleteConverter (): [string[], string[]] {\n  const keys = Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => key.startsWith('pvpArr') || key.includes('xtra') || key.startsWith('intervalArr'))\n\n  return [keys, []]\n}\n","import { Converter } from './abstract'\n\nconst extensionMap: { [k: string]: string } = {\n  afk: 'bibliofile/afk',\n  ban_messages: 'bibliofile/ban_messages',\n  biblio_analytics: 'bibliofile/analytics',\n  biblio_banks: 'bibliofile/banking',\n  biblio_censor: 'bibliofile/censoring',\n  biblio_cron_messages: 'bibliofile/cron',\n  biblio_lists: 'bibliofile/lists',\n  biblio_name_triggers: 'bibliofile/name_triggers',\n  biblio_op: 'bibliofile/slash_op',\n  biblio_tempban: 'bibliofile/tempban',\n  DaPgroupManagement: 'dapersonmgn/groupmanagement',\n  DaPVPBeta: 'dapersonmgn/combatmessages',\n  dice: 'bibliofile/dice',\n  gmt: 'xyz.wingysam.gmt',\n  jemcount: 'bibliofile/countdown',\n  lastseen: 'xyz.wingysam.lastseen',\n  logviewer: 'bibliofile/logs',\n  manpages: 'bibliofile/manpages',\n  marcopolo: 'bibliofile/marcopolo',\n  quests: 'bibliofile/quests',\n  warnings: 'bibliofile/warnings',\n  wingysam_repeat: 'xyz.wingysam.repeat',\n  worldCommands: 'dapersonmgn/worldcommands'\n}\n\nconst isRemoved = (id: string) => {\n  return ['biblio_history', 'discord', 'biblio_storage'].includes(id)\n}\n\nfunction toNewId (id: string) {\n  return extensionMap[id] || id\n}\n\n/**\n * Old: http://blockheadsfans.com/messagebot/extensions\n * New: https://github.com/Blockheads-Messagebot/Extensions/blob/master/extensions.json\n */\nexport class ExtensionsConverter implements Converter {\n  id = 'extensions'\n\n  supports (key: string) {\n    return key === 'mb_extensions'\n  }\n\n  convert (_key: string, data: string): { key: string; data: string } {\n    const ids = JSON.parse(data) as string[]\n    const newIds = ids.filter(id => !isRemoved(id)).map(toNewId)\n    return { key: 'autoload', data: JSON.stringify(newIds) }\n  }\n}\n\nexport function extensionsConverter ({ overwrite }: { overwrite: boolean }): [string[], string[]] {\n  const worldIds = new Set(Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => /\\d$/.test(key))\n    .map(key => key.replace(/.*?(\\d+)$/, '$1')))\n\n  const oldExtensions = JSON.parse(localStorage.getItem('mb_extensions') || '[]') as string[]\n  const newIds = oldExtensions.filter(id => !isRemoved(id)).map(toNewId)\n\n  const warnings: string[] = []\n  for (const worldId of worldIds) {\n    const key = `/${worldId}/extensions/autoload`\n    if (localStorage.getItem(key) != null && !overwrite) {\n      warnings.push('Not overwriting ' + key)\n    } else {\n      localStorage.setItem(key, JSON.stringify(newIds))\n    }\n  }\n  return [['mb_extensions'], warnings]\n}\n","interface OldUsers {\n  [key: string]: string[]\n}\n\ninterface OldDisplayNames {\n  [key: string]: string\n}\n\ntype OldPermStrings =\n  | 'KICK'\n  | 'UNBAN'\n  | 'BAN'\n  | 'BAN-NO-DEVICE'\n  | 'BANKICKADMINS'\n  | 'BANKICKMODS'\n  | 'MOD'\n  | 'UNMOD'\n  | 'ADMIN'\n  | 'UNADMIN'\n  | 'STOP'\n  | 'HELP'\n  | 'WHITELIST'\n  | 'UNWHITELIST'\n  | 'LISTMOD'\n  | 'LISTBAN'\n  | 'LISTADMIN'\n  | 'LISTWHITELIST'\n  | 'PVPON'\n  | 'PVPOFF'\n  | 'LOADLIST'\n  | 'CLEARMOD'\n  | 'CLEARADMIN'\n  | 'CLEARBAN'\n  | 'CLEARWHITELIST'\n  | 'SETPASSWORD'\n  | 'REMOVEPASSWORD'\n  | 'SETPRIVACY'\n  | 'GROUPADD'\n  | 'GROUPDELETE'\n\ntype NewPermStrings = \n  | 'BH.HELP'\n  | 'BH.PLAYERS'\n  | 'BH.KICK'\n  | 'BH.KICK_MOD'\n  | 'BH.KICK_ADMIN'\n  | 'BH.BAN'\n  | 'BH.BAN_MOD'\n  | 'BH.BAN_ADMIN'\n  | 'BH.BAN_NO_DEVICE'\n  | 'BH.BAN_NO_DEVICE_MOD'\n  | 'BH.BAN_NO_DEVICE_ADMIN'\n  | 'BH.UNBAN'\n  | 'BH.WHITELIST'\n  | 'BH.UNWHITELIST'\n  | 'BH.LIST_BLACKLIST'\n  | 'BH.LIST_WHITELIST'\n  | 'BH.LIST_ADMINLIST'\n  | 'BH.LIST_MODLIST'\n  | 'BH.STOP'\n  | 'BH.PVPON'\n  | 'BH.PVPOFF'\n  | 'BH.LOADLISTS'\n  | 'BH.MOD'\n  | 'BH.UNMOD'\n  | 'BH.ADMIN'\n  | 'BH.UNADMIN'\n  | 'BH.CLEAR_BLACKLIST'\n  | 'BH.CLEAR_WHITELIST'\n  | 'BH.CLEAR_MODLIST'\n  | 'BH.CLEAR_ADMINLIST'\n  | 'BH.SET_PASSWORD'\n  | 'BH.SET_PRIVACY'\n  | 'BH.REMOVE_PASSWORD'\n  | 'GM.ADD'\n  | 'GM.REMOVE'\n\n\ninterface NewPermissionStrings {\n  [oldPermission: string]: NewPermStrings|NewPermStrings[]\n}\n\ninterface OldPermissions {\n  [key: string]: OldPermStrings[]\n}\n\ninterface UserData {\n  player: string\n  permissions: {\n    allowed: string[],\n    disabled: string[]\n  }\n}\n\ninterface GroupData {\n  id: number\n  name: string\n  permissions: {\n    allowed: string[],\n    disabled: string[]\n  },\n  players: string[],\n  managed: boolean\n}\n\ninterface ManagedGroupPermissions {\n  [groupName: string]: {\n    allowed: string[],\n    disabled: string[]\n  }\n}\n\n/*\n\n        prefix + 'DisplayNames' + id,\n        prefix + 'GroupPermissions' + id\n*/\n\n/**\n * From: http://blockheadsfans.com/messagebot/extension/dapersonmgn/DaPgroupManagement\n * To: https://gitcdn.xyz/repo/dapersonmgn/BHMB-groupManagement/master/build/bundle.js\n */\nexport function groupConverter ({ overwrite }: { overwrite: boolean }): [string[], string[]] {\n  const prefix = 'DaPgroupManagement'\n  const saveId = 'DaPersonMGN/groupManagement'.toLocaleLowerCase()\n\n  const warnings: string[] = []\n  const migrated: string[] = []\n\n  const permissionConversions: NewPermissionStrings = {\n    'KICK': 'BH.KICK',\n    'UNBAN': 'BH.UNBAN',\n    'BAN': 'BH.BAN',\n    'BAN-NO-DEVICE': 'BH.BAN_NO_DEVICE',\n    'BANKICKADMINS': ['BH.BAN_ADMIN', 'BH.KICK_ADMIN', 'BH.BAN_NO_DEVICE_ADMIN'],\n    'BANKICKMODS': ['BH.BAN_MOD', 'BH.BAN_NO_DEVICE_MOD', 'BH.KICK_MOD'],\n    'MOD': 'BH.MOD',\n    'UNMOD': 'BH.UNMOD',\n    'ADMIN': 'BH.ADMIN',\n    'UNADMIN': 'BH.UNADMIN',\n    'STOP': 'BH.STOP',\n    'HELP': 'BH.HELP',\n    'WHITELIST': 'BH.WHITELIST',\n    'UNWHITELIST': 'BH.UNWHITELIST',\n    'LISTMOD': 'BH.LIST_MODLIST',\n    'LISTBAN': 'BH.LIST_BLACKLIST',\n    'LISTADMIN': 'BH.LIST_ADMINLIST',\n    'LISTWHITELIST': 'BH.LIST_WHITELIST',\n    'PVPON': 'BH.PVPON',\n    'PVPOFF': 'BH.PVPOFF',\n    'LOADLIST': 'BH.LOADLISTS',\n    'CLEARMOD': 'BH.CLEAR_MODLIST',\n    'CLEARADMIN': 'BH.CLEAR_ADMINLIST',\n    'CLEARBAN': 'BH.CLEAR_BLACKLIST',\n    'CLEARWHITELIST': 'BH.CLEAR_WHITELIST',\n    'SETPASSWORD': 'BH.SET_PASSWORD',\n    'REMOVEPASSWORD': 'BH.REMOVE_PASSWORD',\n    'SETPRIVACY': 'BH.SET_PRIVACY',\n    'GROUPADD': 'GM.ADD',\n    'GROUPDELETE': 'GM.REMOVE'\n  }\n\n  const managedGroupPermissions: ManagedGroupPermissions = {\n    'administrator': {\n      allowed: ['BH.HELP', 'BH.PLAYERS', 'BH.KICK_MOD', 'BH.KICK_ADMIN', 'BH.KICK', 'BH.BAN_MOD', 'BH.BAN_ADMIN', 'BH.BAN', 'BH.BAN_NO_DEVICE_MOD', 'BH.BAN_NO_DEVICE_ADMIN', 'BH.BAN_NO_DEVICE', 'BH.UNBAN', 'BH.WHITELIST', 'BH.UNWHITELIST', 'BH.LIST_MODLIST', 'BH.LIST_BLACKLIST', 'BH.LIST_WHITELIST', 'BH.LIST_ADMINLIST', 'BH.LOADLISTS', 'BH.STOP', 'BH.PVPON', 'BH.PVPOFF', 'BH.MOD', 'BH.UNMOD', 'BH.ADMIN', 'BH.UNADMIN', 'BH.CLEAR_MODLIST', 'BH.CLEAR_ADMINLIST', 'BH.CLEAR_WHITELIST', 'BH.CLEAR_BLACKLIST'],\n      disabled: ['BH.HELP', 'BH.PLAYERS', 'BH.KICK_MOD', 'BH.KICK_ADMIN', 'BH.KICK', 'BH.BAN_MOD', 'BH.BAN_ADMIN', 'BH.BAN', 'BH.BAN_NO_DEVICE_MOD', 'BH.BAN_NO_DEVICE_ADMIN', 'BH.BAN_NO_DEVICE', 'BH.UNBAN', 'BH.WHITELIST', 'BH.UNWHITELIST', 'BH.LIST_MODLIST', 'BH.LIST_BLACKLIST', 'BH.LIST_WHITELIST', 'BH.LIST_ADMINLIST', 'BH.LOADLISTS', 'BH.STOP', 'BH.PVPON', 'BH.PVPOFF', 'BH.MOD', 'BH.UNMOD', 'BH.ADMIN', 'BH.UNADMIN', 'BH.CLEAR_MODLIST', 'BH.CLEAR_ADMINLIST', 'BH.CLEAR_WHITELIST', 'BH.CLEAR_BLACKLIST']\n    },\n    'moderator': {\n      allowed: ['BH.HELP', 'BH.PLAYERS', 'BH.KICK', 'BH.BAN', 'BH.BAN_NO_DEVICE', 'BH.UNBAN', 'BH.WHITELIST', 'BH.UNWHITELIST', 'BH.LIST_BLACKLIST', 'BH.LIST_WHITELIST'],\n      disabled: ['BH.HELP', 'BH.PLAYERS', 'BH.KICK', 'BH.BAN', 'BH.BAN_NO_DEVICE', 'BH.UNBAN', 'BH.WHITELIST', 'BH.UNWHITELIST', 'BH.LIST_BLACKLIST', 'BH.LIST_WHITELIST']\n    }\n  }\n\n  const convertPermissions = (permissions: OldPermStrings[]) => permissions.map(permission => permissionConversions[permission]).reduce((a, b) => {\n    if (typeof a === \"string\") {\n      if (typeof b === \"string\") {\n        return [a, b]\n      } else {\n        return b.concat(a)\n      }\n    } else {\n      if (typeof b === \"string\") {\n        return a.concat(b)\n      } else {\n        return a.concat(b)\n      }\n    }\n  }) as NewPermStrings[]\n\n  const worldIds = Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => key.startsWith(prefix + 'Users'))\n    .map(key => key.replace(/.*?(\\d+)$/, '$1'))\n\n  for (const id of worldIds) {\n    const oldUsers: OldUsers = JSON.parse(localStorage.getItem(prefix + 'Users' + id)!)\n    const oldDisplayNames: OldDisplayNames = JSON.parse(localStorage.getItem(prefix + 'DisplayNames' + id)!)\n    const oldPerms: OldPermissions = JSON.parse(localStorage.getItem(prefix + 'GroupPermissions' + id)!)\n\n    const groupUsers: {[name: string]: string[]} = {}\n\n    //Let's migrate users.\n    // /247945/dapersonmgn/groupmanagement/key\n    const userData: UserData[] = []\n    const userSaveKey = `/${id}/${saveId}/users`\n    for (const name in oldUsers) {\n      const oldUserGroups = oldUsers[name]\n      for (const group of oldUserGroups) {\n        if (!groupUsers[group]) {\n          groupUsers[group] = []\n        }\n        groupUsers[group].push(name)\n      }\n      userData.push({\n        player: name,\n        permissions: {\n          allowed: [],\n          disabled: []\n        }\n      })\n    }\n\n    //Let's migrate groups.\n    const groupData: GroupData[] = []\n    const groupSaveKey = `/${id}/${saveId}/groups`\n    let groupId = 1\n    for (const groupName in oldPerms) {\n      const oldPermissions = oldPerms[groupName]\n      const newPermissions = convertPermissions(oldPermissions)\n      const managedPermissions = managedGroupPermissions[groupName]\n      const displayName = oldDisplayNames[groupName]\n      groupData.push({\n        id: groupId,\n        name: displayName,\n        permissions: {\n          allowed: managedPermissions ? Array.from(new Set(managedPermissions.allowed.concat(newPermissions))) : newPermissions,\n          disabled: managedPermissions ? managedPermissions.disabled : []\n        },\n        players: groupUsers[groupName] || [],\n        managed: ['anyone', 'moderator', 'administrator'].includes(groupName)\n      })\n      groupId++\n    }\n\n    //Is there data set? If so, is the data more than the 3 default groups?\n    if ((localStorage.getItem(groupSaveKey) != null && JSON.parse(localStorage.getItem(groupSaveKey)!).length) > 3 && !overwrite) {\n      warnings.push(`Ignoring migration for ${prefix}GroupPermissions${id} => ${groupSaveKey} and ${prefix}DisplayNames${id} => ${groupSaveKey} as there is already data present`)\n    } else {\n      localStorage.setItem(groupSaveKey, JSON.stringify(groupData))\n      migrated.push(\n        prefix + 'GroupPermissions' + id,\n        prefix + 'DisplayNames' + id\n      )\n    }\n\n    if (localStorage.getItem(userSaveKey) != null && !overwrite) {\n      warnings.push(`Ignoring migration for ${prefix}Users${id} => ${userSaveKey} as there is already data present`)\n    } else {\n      localStorage.setItem(userSaveKey, JSON.stringify(userData))\n      migrated.push(\n        prefix + 'Users' + id\n      )\n    }\n  }\n\n  return [migrated, warnings]\n}\n","import { Converter } from './migrations/abstract'\n\nimport { AfkConverter } from './migrations/afk'\nimport { CensorConverter } from './migrations/censor'\nimport { CombatConverter } from './migrations/combat'\nimport { CronConverter } from './migrations/cron'\nimport { NameTriggerConverter } from './migrations/nameTriggers'\nimport { SlashOpConverter } from './migrations/slashOp'\nimport { DiscordConverter } from './migrations/discord'\nimport { ManpageConverter } from './migrations/manpages'\nimport { TempbanConverter } from './migrations/tempban'\nimport { WarningConverter } from './migrations/warnings'\nimport { settingsConverter } from './migrations/settings'\nimport { versionConverter, playersConverter, logLoadConverter } from './migrations/housekeeping'\nimport { questsConverter } from './migrations/quests'\nimport { BankingConverter } from './migrations/banking'\nimport { MessageConverter } from './migrations/messages'\nimport { obsoleteConverter } from './migrations/obsolete'\nimport { extensionsConverter } from './migrations/extensions'\nimport { groupConverter } from './migrations/groups';\n\nconst migrations: Converter[] = [\n  new AfkConverter(),\n  new BankingConverter(),\n  new CensorConverter(),\n  new CombatConverter(),\n  new CronConverter(),\n  new DiscordConverter(),\n  new ManpageConverter(),\n  new MessageConverter(),\n  new NameTriggerConverter(),\n  new SlashOpConverter(),\n  new TempbanConverter(),\n  new WarningConverter()\n]\n\nconst complexMigrations: Array<(options: { overwrite: boolean }) => [string[], string[]]> = [\n  groupConverter,\n  settingsConverter,\n  versionConverter,\n  playersConverter,\n  logLoadConverter,\n  questsConverter,\n  extensionsConverter,\n  obsoleteConverter\n]\n\nfunction toArray<T> (data: T | T[]): T[] {\n  return Array.isArray(data) ? data : [data]\n}\n\n/**\n * Migrates all keys in localStorage to the new save format according to the migrations defined above.\n * @returns a list of warnings\n */\nexport function migrate ({ remove = false, overwrite = false } = {}): string[] {\n  const [ migrated, warnings ] = complexMigrations.map(fn => fn({ overwrite }))\n    .reduce<[string[], string[]]>(([ a, b ], [ m, w ]) => [ a.concat(m), b.concat(w) ], [[], []])\n\n  // Ignore MB7 keys\n  const keys = Array.from({ length: localStorage.length })\n    .map((_, i) => localStorage.key(i)!)\n    .filter(key => !key.startsWith('/'))\n    .filter(key => !key.startsWith('load_indicator')) // Non-standardly named, but used by MB7\n    .filter(key => !migrated.includes(key))\n\n  for (const key of keys) {\n    const migrateKey = /\\d+$/.test(key) ? key.replace(/\\d+$/, '') : key\n    const migrator = migrations.find(m => m.supports(migrateKey))\n\n    if (!migrator) {\n      warnings.push(`Missing migration for ${key}. Go bug Bibliophile`)\n      continue\n    }\n\n    toArray(migrator.convert(migrateKey, localStorage.getItem(key)!)).forEach(({ key: outKey, data }) => {\n      const saveKey = migrateKey === key ? outKey : `/${key.substr(migrateKey.length)}/${migrator.id.toLocaleLowerCase()}/${outKey}`\n\n      if (localStorage.getItem(saveKey) != null && !overwrite) {\n        warnings.push(`Ignoring migration for ${key} => ${saveKey} as there is already data present.`)\n      } else {\n        localStorage.setItem(saveKey, data)\n        migrated.push(key)\n      }\n    })\n  }\n\n  if (remove) {\n    for (const key of migrated) {\n      localStorage.removeItem(key)\n    }\n  }\n\n  return warnings\n}\n","import { MessageBot } from '@bhmb/bot'\nimport { UIExtensionExports } from '@bhmb/ui'\n\nimport html from './page.html'\nimport { migrate } from './migrate'\n\nMessageBot.registerExtension('bibliofile/convert', function (ex) {\n  const ui = ex.bot.getExports('ui') as UIExtensionExports | undefined\n  if (!ui) {\n    console.log('This extension requires a browser.')\n    return\n  }\n\n  const tab = ui.addTab('Config Migration')\n  tab.innerHTML = html\n\n  const ul = tab.querySelector('ul')!\n\n  tab.querySelector('button')!.addEventListener('click', () => {\n    const warnings = migrate({\n      remove: tab.querySelector<HTMLInputElement>('[data-for=remove]')!.checked,\n      overwrite: tab.querySelector<HTMLInputElement>('[data-for=overwrite]')!.checked\n    })\n\n    while (ul.firstChild) ul.removeChild(ul.firstChild)\n\n    for (const warning of warnings) {\n      const li = ul.appendChild(document.createElement('li'))\n      li.textContent = warning\n    }\n  })\n})\n"],"names":["MessageBot"],"mappings":"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"}